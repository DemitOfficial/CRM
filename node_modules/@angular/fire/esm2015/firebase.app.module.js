/**
 * @fileoverview added by tsickle
 * Generated from: firebase.app.module.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Inject, InjectionToken, isDevMode, NgModule, NgZone, Optional, PLATFORM_ID, VERSION as NG_VERSION, Version } from '@angular/core';
import firebase from 'firebase/app';
/**
 * @record
 */
import * as ɵngcc0 from '@angular/core';
export function FirebaseOptions() { }
/**
 * @record
 */
export function FirebaseAppConfig() { }
/** @type {?} */
export const FIREBASE_OPTIONS = new InjectionToken('angularfire2.app.options');
/** @type {?} */
export const FIREBASE_APP_NAME = new InjectionToken('angularfire2.app.nameOrConfig');
// Have to implement as we need to return a class from the provider, we should consider exporting
// this in the firebase/app types as this is our highest risk of breaks
export class FirebaseApp {
}
if (false) {
    /** @type {?} */
    FirebaseApp.prototype.name;
    /** @type {?} */
    FirebaseApp.prototype.options;
    /** @type {?} */
    FirebaseApp.prototype.analytics;
    /** @type {?} */
    FirebaseApp.prototype.auth;
    /** @type {?} */
    FirebaseApp.prototype.database;
    /** @type {?} */
    FirebaseApp.prototype.messaging;
    /** @type {?} */
    FirebaseApp.prototype.performance;
    /** @type {?} */
    FirebaseApp.prototype.storage;
    /** @type {?} */
    FirebaseApp.prototype.delete;
    /** @type {?} */
    FirebaseApp.prototype.firestore;
    /** @type {?} */
    FirebaseApp.prototype.functions;
    /** @type {?} */
    FirebaseApp.prototype.remoteConfig;
}
/** @type {?} */
export const VERSION = new Version('6.1.2');
/**
 * @param {?} options
 * @param {?} zone
 * @param {?=} nameOrConfig
 * @return {?}
 */
export function ɵfirebaseAppFactory(options, zone, nameOrConfig) {
    /** @type {?} */
    const name = typeof nameOrConfig === 'string' && nameOrConfig || '[DEFAULT]';
    /** @type {?} */
    const config = typeof nameOrConfig === 'object' && nameOrConfig || {};
    config.name = config.name || name;
    // Added any due to some inconsistency between @firebase/app and firebase types
    /** @type {?} */
    const existingApp = (/** @type {?} */ (firebase.apps.filter((/**
     * @param {?} app
     * @return {?}
     */
    app => app && app.name === config.name))[0]));
    // We support FirebaseConfig, initializeApp's public type only accepts string; need to cast as any
    // Could be solved with https://github.com/firebase/firebase-js-sdk/pull/1206
    /** @type {?} */
    const app = (/** @type {?} */ ((existingApp || zone.runOutsideAngular((/**
     * @return {?}
     */
    () => firebase.initializeApp(options, (/** @type {?} */ (config))))))));
    try {
        if (JSON.stringify(options) !== JSON.stringify(app.options)) {
            /** @type {?} */
            const hmr = !!((/** @type {?} */ (module))).hot;
            log('error', `${app.name} Firebase App already initialized with different options${hmr ? ', you may need to reload as Firebase is not HMR aware.' : '.'}`);
        }
    }
    catch (e) { }
    return app;
}
/** @type {?} */
export const ɵlogAuthEmulatorError = (/**
 * @return {?}
 */
() => {
    // TODO sort this out, https://github.com/angular/angularfire/issues/2656
    log('warn', 'You may need to import \'firebase/auth\' manually in your component rather than rely on AngularFireAuth\'s dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656');
});
/** @type {?} */
const log = (/**
 * @param {?} level
 * @param {...?} args
 * @return {?}
 */
(level, ...args) => {
    if (isDevMode() && typeof console !== 'undefined') {
        console[level](...args);
    }
});
const ɵ0 = log;
globalThis.ɵAngularfireInstanceCache || (globalThis.ɵAngularfireInstanceCache = new Map());
/**
 * @template T
 * @param {?} cacheKey
 * @param {?} moduleName
 * @param {?} app
 * @param {?} fn
 * @param {?} args
 * @return {?}
 */
export function ɵfetchInstance(cacheKey, moduleName, app, fn, args) {
    const [instance, ...cachedArgs] = globalThis.ɵAngularfireInstanceCache.get(cacheKey) || [];
    if (instance) {
        try {
            if (args.some((/**
             * @param {?} arg
             * @param {?} i
             * @return {?}
             */
            (arg, i) => {
                /** @type {?} */
                const cachedArg = cachedArgs[i];
                if (arg && typeof arg === 'object') {
                    return JSON.stringify(arg) !== JSON.stringify(cachedArg);
                }
                else {
                    return arg !== cachedArg;
                }
            }))) {
                /** @type {?} */
                const hmr = !!((/** @type {?} */ (module))).hot;
                log('error', `${moduleName} was already initialized on the ${app.name} Firebase App instance with different settings.${hmr ? ' You may need to reload as Firebase is not HMR aware.' : ''}`);
            }
        }
        catch (e) { }
        return instance;
    }
    else {
        /** @type {?} */
        const newInstance = fn();
        globalThis.ɵAngularfireInstanceCache.set(cacheKey, [newInstance, ...args]);
        return newInstance;
    }
}
/** @type {?} */
const FIREBASE_APP_PROVIDER = {
    provide: FirebaseApp,
    useFactory: ɵfirebaseAppFactory,
    deps: [
        FIREBASE_OPTIONS,
        NgZone,
        [new Optional(), FIREBASE_APP_NAME]
    ]
};
export class AngularFireModule {
    // tslint:disable-next-line:ban-types
    /**
     * @param {?} platformId
     */
    constructor(platformId) {
        firebase.registerVersion('angularfire', VERSION.full, platformId.toString());
        firebase.registerVersion('angular', NG_VERSION.full);
    }
    /**
     * @param {?} options
     * @param {?=} nameOrConfig
     * @return {?}
     */
    static initializeApp(options, nameOrConfig) {
        return {
            ngModule: AngularFireModule,
            providers: [
                { provide: FIREBASE_OPTIONS, useValue: options },
                { provide: FIREBASE_APP_NAME, useValue: nameOrConfig }
            ]
        };
    }
}
AngularFireModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: AngularFireModule });
AngularFireModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function AngularFireModule_Factory(t) { return new (t || AngularFireModule)(ɵngcc0.ɵɵinject(PLATFORM_ID)); }, providers: [FIREBASE_APP_PROVIDER] });
/** @nocollapse */
AngularFireModule.ctorParameters = () => [
    { type: Object, decorators: [{ type: Inject, args: [PLATFORM_ID,] }] }
];
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AngularFireModule, [{
        type: NgModule,
        args: [{
                providers: [FIREBASE_APP_PROVIDER]
            }]
    }], function () { return [{ type: Object, decorators: [{
                type: Inject,
                args: [PLATFORM_ID]
            }] }]; }, null); })();
export { ɵ0 };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmlyZWJhc2UuYXBwLm1vZHVsZS5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vd29ya3NwYWNlL3NyYy9jb3JlL2ZpcmViYXNlLmFwcC5tb2R1bGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQ0wsTUFBTSxFQUFFLGNBQWMsRUFBRSxTQUFTLEVBQXVCLFFBQVEsRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLFdBQVcsRUFBRSxPQUFPLElBQUksVUFBVSxFQUFFLE9BQU8sRUFDaEksTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxRQUFRLE1BQU0sY0FBYyxDQUFDO0FBQ3BDO0FBQ0c7QUFBVzs7QUFDZCxxQ0FFQztBQUNEO0FBQ0c7QUFBVztBQUFkLHVDQUVDO0FBQ0Q7QUFDQSxNQUFNLE9BQU8sZ0JBQWdCLEdBQUcsSUFBSSxjQUFjLENBQWtCLDBCQUEwQixDQUFDO0FBQy9GO0FBQUEsTUFBTSxPQUFPLGlCQUFpQixHQUFHLElBQUksY0FBYyxDQUF5QywrQkFBK0IsQ0FBQztBQUM1SDtBQUNpRztBQUVqRyxNQUFNLE9BQU8sV0FBVztBQUFHLENBYTFCO0FBQ0Q7QUFDWTtBQUFxQixJQWQvQiwyQkFBYTtBQUNmO0FBQ00sSUFESiw4QkFBWTtBQUNkO0FBQXFCLElBQW5CLGdDQUE4QztBQUNoRDtBQUFxQixJQUFuQiwyQkFBK0I7QUFDakM7QUFBcUIsSUFBbkIsK0JBQStEO0FBQ2pFO0FBQXFCLElBQW5CLGdDQUE4QztBQUNoRDtBQUFxQixJQUFuQixrQ0FBb0Q7QUFDdEQ7QUFBcUIsSUFBbkIsOEJBQThEO0FBQ2hFO0FBQXFCLElBQW5CLDZCQUE0QjtBQUM5QjtBQUFxQixJQUFuQixnQ0FBOEM7QUFDaEQ7QUFBcUIsSUFBbkIsZ0NBQTZEO0FBQy9EO0FBQXFCLElBQW5CLG1DQUF1RDtBQUN6RDtBQUNBO0FBQ0EsTUFBTSxPQUFPLE9BQU8sR0FBRyxJQUFJLE9BQU8sQ0FBQztBQUFVO0FBQUksUUFBUSxDQUFDO0FBRWhE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cEIsUUFBSSxNQUFNO0FBQ1YsUUFBSSxDQUFDLElBQUksUUFBUSxFQUFFLEVBQUUsaUJBQWlCLENBQUM7QUFDdkMsS0FBRztBQUNILENBQUM7QUFLRCxNQUFNLE9BQU8saUJBQWlCO0FBQzlCO0FBQTBDO0FBQVE7QUFBNkI7QUFBUSxJQVdyRixZQUFpQyxVQUFrQjtBQUNyRCxRQUFJLFFBQVEsQ0FBQyxlQUFlLENBQUMsYUFBYSxFQUFFLE9BQU8sQ0FBQyxJQUFJLEVBQUUsVUFBVSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUM7QUFDakYsUUFBSSxRQUFRLENBQUMsZUFBZSxDQUFDLFNBQVMsRUFBRSxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDekQsSUFBRSxDQUFDO0FBQ0g7QUFDTTtBQUEwQjtBQUFnQztBQUFtQjtBQUFRLElBaEJ6RixNQUFNLENBQUMsYUFBYSxDQUFDLE9BQXdCLEVBQUUsWUFBeUM7QUFBSSxRQUMxRixPQUFPO0FBQ1gsWUFBTSxRQUFRLEVBQUUsaUJBQWlCO0FBQ2pDLFlBQU0sU0FBUyxFQUFFO0FBQ2pCLGdCQUFRLEVBQUMsT0FBTyxFQUFFLGdCQUFnQixFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUM7QUFDdEQsZ0JBQVEsRUFBQyxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsUUFBUSxFQUFFLFlBQVksRUFBQztBQUM1RCxhQUFPO0FBQ1AsU0FBSyxDQUFDO0FBQ04sSUFBRSxDQUFDO0FBQ0g7NkNBYkMsUUFBUSxTQUFDO0NBQ1IsU0FBUyxFQUFFLENBQUMscUJBQXFCLENBQUMsY0FDbkMsK0pBQ0k7QUFBQztBQUFtQjtBQUNVLFlBV1ksTUFBTSx1QkFBdEMsTUFBTSxTQUFDLFdBQVc7QUFBUTs7Ozs7Ozs7O2tDQUFFO0FBQUM7QUFDMUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBJbmplY3QsIEluamVjdGlvblRva2VuLCBpc0Rldk1vZGUsIE1vZHVsZVdpdGhQcm92aWRlcnMsIE5nTW9kdWxlLCBOZ1pvbmUsIE9wdGlvbmFsLCBQTEFURk9STV9JRCwgVkVSU0lPTiBhcyBOR19WRVJTSU9OLCBWZXJzaW9uXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IGZpcmViYXNlIGZyb20gJ2ZpcmViYXNlL2FwcCc7XG5cbi8vIElOVkVTVElHQVRFIFB1YmxpYyB0eXBlcyBkb24ndCBleHBvc2UgRmlyZWJhc2VPcHRpb25zIG9yIEZpcmViYXNlQXBwQ29uZmlnLCBpcyB0aGlzIHRoZSBjYXNlIGFueWxvbmdlcj9cbmV4cG9ydCBpbnRlcmZhY2UgRmlyZWJhc2VPcHRpb25zIHtcbiAgW2tleTogc3RyaW5nXTogYW55O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpcmViYXNlQXBwQ29uZmlnIHtcbiAgW2tleTogc3RyaW5nXTogYW55O1xufVxuXG5leHBvcnQgY29uc3QgRklSRUJBU0VfT1BUSU9OUyA9IG5ldyBJbmplY3Rpb25Ub2tlbjxGaXJlYmFzZU9wdGlvbnM+KCdhbmd1bGFyZmlyZTIuYXBwLm9wdGlvbnMnKTtcbmV4cG9ydCBjb25zdCBGSVJFQkFTRV9BUFBfTkFNRSA9IG5ldyBJbmplY3Rpb25Ub2tlbjxzdHJpbmcgfCBGaXJlYmFzZUFwcENvbmZpZyB8IHVuZGVmaW5lZD4oJ2FuZ3VsYXJmaXJlMi5hcHAubmFtZU9yQ29uZmlnJyk7XG5cbi8vIEhhdmUgdG8gaW1wbGVtZW50IGFzIHdlIG5lZWQgdG8gcmV0dXJuIGEgY2xhc3MgZnJvbSB0aGUgcHJvdmlkZXIsIHdlIHNob3VsZCBjb25zaWRlciBleHBvcnRpbmdcbi8vIHRoaXMgaW4gdGhlIGZpcmViYXNlL2FwcCB0eXBlcyBhcyB0aGlzIGlzIG91ciBoaWdoZXN0IHJpc2sgb2YgYnJlYWtzXG5leHBvcnQgY2xhc3MgRmlyZWJhc2VBcHAgaW1wbGVtZW50cyBQYXJ0aWFsPGZpcmViYXNlLmFwcC5BcHA+IHtcbiAgbmFtZTogc3RyaW5nO1xuICBvcHRpb25zOiB7fTtcbiAgYW5hbHl0aWNzOiAoKSA9PiBmaXJlYmFzZS5hbmFseXRpY3MuQW5hbHl0aWNzO1xuICBhdXRoOiAoKSA9PiBmaXJlYmFzZS5hdXRoLkF1dGg7XG4gIGRhdGFiYXNlOiAoZGF0YWJhc2VVUkw/OiBzdHJpbmcpID0+IGZpcmViYXNlLmRhdGFiYXNlLkRhdGFiYXNlO1xuICBtZXNzYWdpbmc6ICgpID0+IGZpcmViYXNlLm1lc3NhZ2luZy5NZXNzYWdpbmc7XG4gIHBlcmZvcm1hbmNlOiAoKSA9PiBmaXJlYmFzZS5wZXJmb3JtYW5jZS5QZXJmb3JtYW5jZTtcbiAgc3RvcmFnZTogKHN0b3JhZ2VCdWNrZXQ/OiBzdHJpbmcpID0+IGZpcmViYXNlLnN0b3JhZ2UuU3RvcmFnZTtcbiAgZGVsZXRlOiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xuICBmaXJlc3RvcmU6ICgpID0+IGZpcmViYXNlLmZpcmVzdG9yZS5GaXJlc3RvcmU7XG4gIGZ1bmN0aW9uczogKHJlZ2lvbj86IHN0cmluZykgPT4gZmlyZWJhc2UuZnVuY3Rpb25zLkZ1bmN0aW9ucztcbiAgcmVtb3RlQ29uZmlnOiAoKSA9PiBmaXJlYmFzZS5yZW1vdGVDb25maWcuUmVtb3RlQ29uZmlnO1xufVxuXG5leHBvcnQgY29uc3QgVkVSU0lPTiA9IG5ldyBWZXJzaW9uKCdBTkdVTEFSRklSRTJfVkVSU0lPTicpO1xuXG5leHBvcnQgZnVuY3Rpb24gybVmaXJlYmFzZUFwcEZhY3Rvcnkob3B0aW9uczogRmlyZWJhc2VPcHRpb25zLCB6b25lOiBOZ1pvbmUsIG5hbWVPckNvbmZpZz86IHN0cmluZyB8IEZpcmViYXNlQXBwQ29uZmlnIHwgbnVsbCkge1xuICBjb25zdCBuYW1lID0gdHlwZW9mIG5hbWVPckNvbmZpZyA9PT0gJ3N0cmluZycgJiYgbmFtZU9yQ29uZmlnIHx8ICdbREVGQVVMVF0nO1xuICBjb25zdCBjb25maWcgPSB0eXBlb2YgbmFtZU9yQ29uZmlnID09PSAnb2JqZWN0JyAmJiBuYW1lT3JDb25maWcgfHwge307XG4gIGNvbmZpZy5uYW1lID0gY29uZmlnLm5hbWUgfHwgbmFtZTtcbiAgLy8gQWRkZWQgYW55IGR1ZSB0byBzb21lIGluY29uc2lzdGVuY3kgYmV0d2VlbiBAZmlyZWJhc2UvYXBwIGFuZCBmaXJlYmFzZSB0eXBlc1xuICBjb25zdCBleGlzdGluZ0FwcCA9IGZpcmViYXNlLmFwcHMuZmlsdGVyKGFwcCA9PiBhcHAgJiYgYXBwLm5hbWUgPT09IGNvbmZpZy5uYW1lKVswXSBhcyBhbnk7XG4gIC8vIFdlIHN1cHBvcnQgRmlyZWJhc2VDb25maWcsIGluaXRpYWxpemVBcHAncyBwdWJsaWMgdHlwZSBvbmx5IGFjY2VwdHMgc3RyaW5nOyBuZWVkIHRvIGNhc3QgYXMgYW55XG4gIC8vIENvdWxkIGJlIHNvbHZlZCB3aXRoIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvcHVsbC8xMjA2XG4gIGNvbnN0IGFwcCA9IChleGlzdGluZ0FwcCB8fCB6b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IGZpcmViYXNlLmluaXRpYWxpemVBcHAob3B0aW9ucywgY29uZmlnIGFzIGFueSkpKSBhcyBGaXJlYmFzZUFwcDtcbiAgdHJ5IHtcbiAgICBpZiAoSlNPTi5zdHJpbmdpZnkob3B0aW9ucykgIT09IEpTT04uc3RyaW5naWZ5KGFwcC5vcHRpb25zKSkge1xuICAgICAgY29uc3QgaG1yID0gISEobW9kdWxlIGFzIGFueSkuaG90O1xuICAgICAgbG9nKCdlcnJvcicsIGAke2FwcC5uYW1lfSBGaXJlYmFzZSBBcHAgYWxyZWFkeSBpbml0aWFsaXplZCB3aXRoIGRpZmZlcmVudCBvcHRpb25zJHtobXIgPyAnLCB5b3UgbWF5IG5lZWQgdG8gcmVsb2FkIGFzIEZpcmViYXNlIGlzIG5vdCBITVIgYXdhcmUuJyA6ICcuJ31gKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHsgfVxuICByZXR1cm4gYXBwO1xufVxuXG5leHBvcnQgY29uc3QgybVsb2dBdXRoRW11bGF0b3JFcnJvciA9ICgpID0+IHtcbiAgLy8gVE9ETyBzb3J0IHRoaXMgb3V0LCBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyZmlyZS9pc3N1ZXMvMjY1NlxuICBsb2coJ3dhcm4nLCAnWW91IG1heSBuZWVkIHRvIGltcG9ydCBcXCdmaXJlYmFzZS9hdXRoXFwnIG1hbnVhbGx5IGluIHlvdXIgY29tcG9uZW50IHJhdGhlciB0aGFuIHJlbHkgb24gQW5ndWxhckZpcmVBdXRoXFwncyBkeW5hbWljIGltcG9ydCwgd2hlbiB1c2luZyB0aGUgZW11bGF0b3Igc3VpdGUgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhcmZpcmUvaXNzdWVzLzI2NTYnKTtcbn07XG5cbmNvbnN0IGxvZyA9IChsZXZlbDogJ2xvZyd8J2Vycm9yJ3wnaW5mbyd8J3dhcm4nLCAuLi5hcmdzOiBhbnkpID0+IHtcbiAgaWYgKGlzRGV2TW9kZSgpICYmIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykge1xuICAgIGNvbnNvbGVbbGV2ZWxdKC4uLmFyZ3MpO1xuICB9XG59O1xuXG5nbG9iYWxUaGlzLsm1QW5ndWxhcmZpcmVJbnN0YW5jZUNhY2hlIHx8PSBuZXcgTWFwKCk7XG5cbmV4cG9ydCBmdW5jdGlvbiDJtWZldGNoSW5zdGFuY2U8VD4oY2FjaGVLZXk6IGFueSwgbW9kdWxlTmFtZTogc3RyaW5nLCBhcHA6IEZpcmViYXNlQXBwLCBmbjogKCkgPT4gVCwgYXJnczogYW55W10pOiBUIHtcbiAgY29uc3QgW2luc3RhbmNlLCAuLi5jYWNoZWRBcmdzXSA9IGdsb2JhbFRoaXMuybVBbmd1bGFyZmlyZUluc3RhbmNlQ2FjaGUuZ2V0KGNhY2hlS2V5KSB8fCBbXTtcbiAgaWYgKGluc3RhbmNlKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChhcmdzLnNvbWUoKGFyZywgaSkgPT4ge1xuICAgICAgICBjb25zdCBjYWNoZWRBcmcgPSBjYWNoZWRBcmdzW2ldO1xuICAgICAgICBpZiAoYXJnICYmIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGFyZykgIT09IEpTT04uc3RyaW5naWZ5KGNhY2hlZEFyZyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIGFyZyAhPT0gY2FjaGVkQXJnO1xuICAgICAgICB9XG4gICAgICB9KSkge1xuICAgICAgICBjb25zdCBobXIgPSAhIShtb2R1bGUgYXMgYW55KS5ob3Q7XG4gICAgICAgIGxvZygnZXJyb3InLCBgJHttb2R1bGVOYW1lfSB3YXMgYWxyZWFkeSBpbml0aWFsaXplZCBvbiB0aGUgJHthcHAubmFtZX0gRmlyZWJhc2UgQXBwIGluc3RhbmNlIHdpdGggZGlmZmVyZW50IHNldHRpbmdzLiR7aG1yID8gJyBZb3UgbWF5IG5lZWQgdG8gcmVsb2FkIGFzIEZpcmViYXNlIGlzIG5vdCBITVIgYXdhcmUuJyA6ICcnfWApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHsgfVxuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBuZXdJbnN0YW5jZSA9IGZuKCk7XG4gICAgZ2xvYmFsVGhpcy7JtUFuZ3VsYXJmaXJlSW5zdGFuY2VDYWNoZS5zZXQoY2FjaGVLZXksIFtuZXdJbnN0YW5jZSwgLi4uYXJnc10pO1xuICAgIHJldHVybiBuZXdJbnN0YW5jZTtcbiAgfVxufVxuXG5jb25zdCBGSVJFQkFTRV9BUFBfUFJPVklERVIgPSB7XG4gIHByb3ZpZGU6IEZpcmViYXNlQXBwLFxuICB1c2VGYWN0b3J5OiDJtWZpcmViYXNlQXBwRmFjdG9yeSxcbiAgZGVwczogW1xuICAgIEZJUkVCQVNFX09QVElPTlMsXG4gICAgTmdab25lLFxuICAgIFtuZXcgT3B0aW9uYWwoKSwgRklSRUJBU0VfQVBQX05BTUVdXG4gIF1cbn07XG5cbkBOZ01vZHVsZSh7XG4gIHByb3ZpZGVyczogW0ZJUkVCQVNFX0FQUF9QUk9WSURFUl1cbn0pXG5leHBvcnQgY2xhc3MgQW5ndWxhckZpcmVNb2R1bGUge1xuICBzdGF0aWMgaW5pdGlhbGl6ZUFwcChvcHRpb25zOiBGaXJlYmFzZU9wdGlvbnMsIG5hbWVPckNvbmZpZz86IHN0cmluZyB8IEZpcmViYXNlQXBwQ29uZmlnKTogTW9kdWxlV2l0aFByb3ZpZGVyczxBbmd1bGFyRmlyZU1vZHVsZT4ge1xuICAgIHJldHVybiB7XG4gICAgICBuZ01vZHVsZTogQW5ndWxhckZpcmVNb2R1bGUsXG4gICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAge3Byb3ZpZGU6IEZJUkVCQVNFX09QVElPTlMsIHVzZVZhbHVlOiBvcHRpb25zfSxcbiAgICAgICAge3Byb3ZpZGU6IEZJUkVCQVNFX0FQUF9OQU1FLCB1c2VWYWx1ZTogbmFtZU9yQ29uZmlnfVxuICAgICAgXVxuICAgIH07XG4gIH1cblxuICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6YmFuLXR5cGVzXG4gIGNvbnN0cnVjdG9yKEBJbmplY3QoUExBVEZPUk1fSUQpIHBsYXRmb3JtSWQ6IE9iamVjdCkge1xuICAgIGZpcmViYXNlLnJlZ2lzdGVyVmVyc2lvbignYW5ndWxhcmZpcmUnLCBWRVJTSU9OLmZ1bGwsIHBsYXRmb3JtSWQudG9TdHJpbmcoKSk7XG4gICAgZmlyZWJhc2UucmVnaXN0ZXJWZXJzaW9uKCdhbmd1bGFyJywgTkdfVkVSU0lPTi5mdWxsKTtcbiAgfVxufVxuIl19